# This file is maintained by Chef. Do not edit, all changes will be
# overwritten. See fb_fluentbit/README.md

[SERVICE]
<% node['fb_fluentbit']['service_config'].each do |k,v| -%>
    <% v = v.call() if v.respond_to? :call -%>
    <%=k%>  <%=v.to_s%>
<% end -%>

<% plugins = node['fb_fluentbit']['plugins'].values -%>
<% plugins.each do |p| -%>
[<%=  p['type'].upcase %>]
    Name  <%= p['name'] %>
    <% (p['plugin_config'] || {}).each do |k,v| -%>
    <% v = v.call if v.respond_to?(:call) -%>
    <%= k %>  <%= v %>
    <% end -%>

<% end -%>
